"use strict";(self.webpackChunkscalarhub_docs_api=self.webpackChunkscalarhub_docs_api||[]).push([[3949],{8304:(e,s,r)=>{r.r(s),r.d(s,{assets:()=>c,contentTitle:()=>t,default:()=>h,frontMatter:()=>i,metadata:()=>d,toc:()=>l});var n=r(74848),a=r(28453);const i={sidebar_position:4,id:"Cached usage responses"},t="Cached Usage Responses",d={id:"Cached usage responses",title:"Cached Usage Responses",description:"ScalarTax provides API endpoints to query usage data for accounts, customers, and other entities. These endpoints are optimized for performance, allowing applications to efficiently retrieve usage data while supporting caching mechanisms for faster responses.",source:"@site/docs/Cached usage responses.md",sourceDirName:".",slug:"/Cached usage responses",permalink:"/reference/Cached usage responses",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4,id:"Cached usage responses"},sidebar:"tutorialSidebar",previous:{title:"Pagination",permalink:"/reference/Pagination"},next:{title:"Dry Run Requests",permalink:"/reference/Dry run requests"}},c={},l=[{value:"Header Semantics",id:"header-semantics",level:2},{value:"Request Headers",id:"request-headers",level:3},{value:"Supported Cache-Control Directives",id:"supported-cache-control-directives",level:4},{value:"Example Request Header",id:"example-request-header",level:4},{value:"Optional Conditional Headers",id:"optional-conditional-headers",level:3},{value:"Example Request with Conditional Caching",id:"example-request-with-conditional-caching",level:4},{value:"Response Headers",id:"response-headers",level:3},{value:"Example Response Header",id:"example-response-header",level:4},{value:"Example Response for Conditional Request",id:"example-response-for-conditional-request",level:4},{value:"Performance Considerations",id:"performance-considerations",level:2}];function o(e){const s={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.header,{children:(0,n.jsx)(s.h1,{id:"cached-usage-responses",children:"Cached Usage Responses"})}),"\n",(0,n.jsx)(s.p,{children:"ScalarTax provides API endpoints to query usage data for accounts, customers, and other entities. These endpoints are optimized for performance, allowing applications to efficiently retrieve usage data while supporting caching mechanisms for faster responses."}),"\n",(0,n.jsx)(s.p,{children:"ScalarTax supports cached responses to improve latency, especially when the latest data is not critical for your use case. This feature helps display historical data or power dashboard visualizations. When fresh data is required, you can fetch it directly from the source."}),"\n",(0,n.jsx)(s.h2,{id:"header-semantics",children:"Header Semantics"}),"\n",(0,n.jsx)(s.p,{children:"ScalarHub API uses standard HTTP headers to specify caching behavior, ensuring that cached responses are aligned with client requirements."}),"\n",(0,n.jsx)(s.h3,{id:"request-headers",children:"Request Headers"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Header Key \xa0 \xa0 \xa0 \xa0"}),(0,n.jsx)(s.th,{children:"Description \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0"})]})}),(0,n.jsx)(s.tbody,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.strong,{children:"Cache-Control"})}),(0,n.jsx)(s.td,{children:"Defines caching rules, including directives for expiration and revalidation of cached responses."})]})})]}),"\n",(0,n.jsx)(s.h4,{id:"supported-cache-control-directives",children:"Supported Cache-Control Directives"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"max-age=0"}),": Ensures the cached response is immediately stale and must be revalidated with the server."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"private"}),": Restricts cached data to individual users, preventing shared caching."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"must-revalidate"}),": Requires stale cached responses to be revalidated before being served to the client."]}),"\n"]}),"\n",(0,n.jsx)(s.h4,{id:"example-request-header",children:"Example Request Header"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-http",children:"GET /customers/{customer_id}/usage HTTP/1.1\r\nCache-Control: max-age=0, private, must-revalidate\n"})}),"\n",(0,n.jsx)(s.h3,{id:"optional-conditional-headers",children:"Optional Conditional Headers"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Header Key \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0"}),(0,n.jsx)(s.th,{children:"Description \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.strong,{children:"If-Modified-Since"})}),(0,n.jsx)(s.td,{children:"Requests data only if it has been modified since the specified date. \xa0 \xa0"})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.strong,{children:"ETag"})}),(0,n.jsx)(s.td,{children:"Validates the version of cached data with the server. \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0"})]})]})]}),"\n",(0,n.jsx)(s.h4,{id:"example-request-with-conditional-caching",children:"Example Request with Conditional Caching"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-http",children:"GET /subscriptions/{subscription_id}/usage HTTP/1.1\r\nCache-Control: max-age=0, private, must-revalidate\r\nIf-Modified-Since: Mon, 18 Nov 2024 10:00:00 GMT\n"})}),"\n",(0,n.jsx)(s.h3,{id:"response-headers",children:"Response Headers"}),"\n",(0,n.jsx)(s.p,{children:"ScalarHub API responses include caching-related headers to indicate the freshness and validity of the returned data."}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Header Key \xa0 \xa0 \xa0 \xa0"}),(0,n.jsx)(s.th,{children:"Description \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.strong,{children:"Cache-Control"})}),(0,n.jsx)(s.td,{children:"Echoes the request's caching directives or specifies server-side caching rules."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.strong,{children:"Cache-Updated-At"})}),(0,n.jsx)(s.td,{children:"Timestamp in ISO 8601 format indicating the last time the cached data was updated."})]})]})]}),"\n",(0,n.jsx)(s.h4,{id:"example-response-header",children:"Example Response Header"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-http",children:"HTTP/1.1 200 OK\r\nCache-Control: max-age=0, private, must-revalidate\r\nCache-Updated-At: 2024-11-18T16:30:00Z\r\nContent-Type: application/json\n"})}),"\n",(0,n.jsx)(s.h4,{id:"example-response-for-conditional-request",children:"Example Response for Conditional Request"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-http",children:"HTTP/1.1 304 Not Modified\r\nCache-Control: max-age=0, private, must-revalidate\n"})}),"\n",(0,n.jsx)(s.h2,{id:"performance-considerations",children:"Performance Considerations"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Freshness Prioritization"})," By default, caching ensures that the data served is validated against the latest available records, maintaining accuracy for billing and reporting."]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"Reduced Latency"})," Conditional requests reduce unnecessary data transfers while maintaining data freshness."]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,a.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(o,{...e})}):o(e)}}}]);